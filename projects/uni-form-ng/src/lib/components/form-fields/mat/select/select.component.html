<mat-form-field [formGroup]='formGroup' class='w-100'>
  <mat-label>{{ field.label }}</mat-label>

  <mat-select
    *ngIf="field.type === 'select'"
    [formControlName]='field.key'
    [multiple]='field.multi'
    [placeholder]='field.placeholder || ""'
  >
    <mat-optgroup *ngFor='let group of field.groups' [label]='group.name' [disabled]='group.disabled'>
      <mat-option *ngFor='let option of group.options' [value]='option.value' [disabled]='option.disabled'>
        {{ option.label }}
      </mat-option>
    </mat-optgroup>

    <mat-option *ngFor='let option of field.options' [value]='option.value' [disabled]='option.disabled'>
      {{ option.label }}
    </mat-option>
  </mat-select>

  <mat-hint *ngIf='field.hint' align='start'>{{ field.hint }}</mat-hint>

  <mat-error [style]='{display: "flex"}'>
    <uni-form-field-error-ng
      [fieldErrors]='field.errors ?? {}'
      [errors]='formGroup.controls[field.key].errors'
    ></uni-form-field-error-ng>
  </mat-error>
</mat-form-field>
